<!-- do a referrer check here, or something, to ensure that this is only fetched/view from the administration interface
     if the user is an administrator -->
<div class="wrap">
   <h2>reCAPTCHA Options</h2>
   <p>reCAPTCHA is a free, accessible CAPTCHA service that helps to digitize books while blocking spam on your blog.</p>
   
   <form method="post" action="options.php">
      <?php settings_fields('recaptcha_options_group'); ?>

      <h3>Authentication</h3>
      <p>These keys are required before you are able to do anything else. You can get them <a href="<?php echo recaptcha_get_signup_url($this->blog_domain(), 'wordpress');?>" title="Get your reCAPTCHA API Keys">here</a>.</p>
      <p><strong>Note</strong>: Be <em>sure</em> not to mix them up! The public and private keys are not interchangeable!</p>
      
      <table class="form-table">
         <tr valign="top">
            <th scope="row">Public Key</th>
            <td>
               <input type="text" name="recaptcha_options[public_key]" size="40" value="<?php echo $this->options['public_key']; ?>" />
            </td>
         </tr>
         <tr valign="top">
            <th scope="row">Private Key</th>
            <td>
               <input type="text" name="recaptcha_options[private_key]" size="40" value="<?php echo $this->options['private_key']; ?>" />
            </td>
         </tr>
      </table>
      
      <h3>Comment Options</h3>
      <table class="form-table">
         <tr valign="top">
            <th scope="row">Activation</th>
            <td>
               <input type="checkbox" id ="recaptcha_options[show_in_comments]" name="recaptcha_options[show_in_comments]" value="1" <?php checked('1', $this->options['show_in_comments']); ?> />
               <label for="recaptcha_options[show_in_comments]">Enable for comments form</label>
            </td>
         </tr>
         
         <tr valign="top">
            <th scope="row">Target</th>
            <td>
               <input type="checkbox" id="recaptcha_options[bypass_for_registered_users]" name="recaptcha_options[bypass_for_registered_users]" value="1" <?php checked('1', $this->options['bypass_for_registered_users']); ?> />
               <label for="recaptcha_options[bypass_for_registered_users]">Hide for Registered Users who can</label>
               <?php $this->capabilities_dropdown(); // <select> of capabilities ?>
            </td>
         </tr>

         <tr valign="top">
            <th scope="row">Presentation</th>
            <td>
               <label for="recaptcha_options[comments_theme]">Theme:</label>
               <?php $this->theme_dropdown('comments'); ?>
            </td>
         </tr>

         <tr valign="top">
            <th scope="row">Tab Index</th>
            <td>
               <input type="text" name="recaptcha_options[tab_index]" size="10" value="<?php echo $this->options['tab_index']; ?>" />
            </td>
         </tr>
      </table>
      
      <h3>Registration Options</h3>
      <table class="form-table">
         <tr valign="top">
            <th scope="row">Activation</th>
            <td>
               <input type="checkbox" id ="recaptcha_options[show_in_registration]" name="recaptcha_options[show_in_registration]" value="1" <?php checked('1', $this->options['show_in_registration']); ?> />
               <label for="recaptcha_options[show_in_registration]">Enable for registration form</label>
            </td>
         </tr>
         
         <tr valign="top">
            <th scope="row">Presentation</th>
            <td>
               <label for="recaptcha_options[registration_theme]">Theme:</label>
               <?php $this->theme_dropdown('registration'); ?>
            </td>
         </tr>
      </table>
      
      <h3>General Options</h3>
      <table class="form-table">
         <tr valign="top">
            <th scope="row">reCAPTCHA Theme</th>
            <td>
               <label for="recaptcha_options[recaptcha_language]">Language:</label>
               <?php $this->recaptcha_language_dropdown(); ?>
            </td>
         </tr>
         
         <tr valign="top">
            <th scope="row">Plugin</th>
            <td>
               <label for="recaptcha_options[plugin_language]">Language:</label>
               <?php $this->plugin_language_dropdown(); ?>
            </td>
         </tr>
         
         <tr valign="top">
            <th scope="row">Standards Compliance</th>
            <td>
               <input type="checkbox" id ="recaptcha_options[xhtml_compliance]" name="recaptcha_options[xhtml_compliance]" value="1" <?php checked('1', $this->options['xhtml_compliance']); ?> />
               <label for="recaptcha_options[xhtml_compliance]">Produce XHTML 1.0 Strict Compliant Code</label>
            </td>
         </tr>
      </table>
      
      <h3>Error Messages</h3>
      <table class="form-table">
         <tr valign="top">
            <th scope="row">reCAPTCHA Ignored</th>
            <td>
               <input type="text" name="recaptcha_options[no_response_error]" size="70" value="<?php echo $this->options['no_response_error']; ?>" />
            </td>
         </tr>
         
         <tr valign="top">
            <th scope="row">Incorrect Guess</th>
            <td>
               <input type="text" name="recaptcha_options[incorrect_response_error]" size="70" value="<?php echo $this->options['incorrect_response_error']; ?>" />
            </td>
         </tr>
      </table>

      <p class="submit"><input type="submit" class="button-primary" value="<?php _e('Save Changes') ?> &raquo;" /></p>
   </form>
   
   <?php do_settings_sections('recaptcha_options_page'); ?>
</div>